pkgname=python-pyghmi
pkgver=1.5.63
pkgrel=1
pkgdesc="A Pure python IPMI library"
url="https://opendev.org/x/pyghmi"
license=("Apache 2.0")
arch=(any)
depends=(
	"python>=3.11"
	"python<3.12"
	python-cryptography
	python-dateutil
	python-six
	python-setuptools
)
makedepends=(python-distribute)
source=(${pkgname}::"git+https://opendev.org/x/pyghmi#commit=${pkgver}")
md5sums=(SKIP)


package() {
	cd "$srcdir/$pkgname"
	./makesetup
	sed -i "s/import setuptools/from setuptools import setup/" setup.py
	sed -i "s/setuptools.setup/setup/" setup.py
	python setup.py install --prefix=/usr --root="$pkgdir" --optimize=1
}
